<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>How it works â€“ embed</title>
<style>
  :root{
    --bg:#fff; --ink:#111; --muted:#6b7280; --accent:#ff6a3d;
    --card:#f7f7f8; --radius:18px; --shadow:0 18px 40px rgba(0,0,0,.12);
  }
  body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.55 system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji", "Segoe UI Symbol"}
  .hiw{padding:64px 6vw}
  .hiw-title{font-size:clamp(28px,4vw,56px);line-height:1.08;margin:0 0 28px}
  .hiw-cards{display:grid;gap:24px;grid-template-columns:repeat(3,1fr)}
  @media (max-width:980px){.hiw-cards{grid-template-columns:1fr}}
  .hiw-card{
    background:var(--card);border:1px solid #e5e7eb;border-radius:var(--radius);
    overflow:hidden;position:relative;transform:translateY(24px);opacity:.05;
    filter:saturate(.6);
    transition:opacity .7s ease, transform .7s ease, box-shadow .35s ease, filter .35s ease, border-color .35s ease;
  }
  .hiw-card::before{
    content: attr(data-step); position:absolute; left:18px; top:18px;
    background:var(--accent); color:#fff; font-weight:700; width:36px; height:36px;
    border-radius:10px; display:grid; place-items:center; font-size:.95rem;
    box-shadow:0 6px 14px rgba(255,106,61,.3);
  }
  .hiw-media{margin:0;aspect-ratio:16/9;overflow:hidden}
  .hiw-media img{width:100%;height:100%;object-fit:cover;display:block}
  .hiw-body{padding:18px 18px 22px}
  .hiw-heading{margin:.25rem 0 .5rem;font-size:1.35rem}
  .hiw-text{color:var(--muted);margin:0}
  .hiw-card.is-visible{opacity:1;transform:translateY(0)}
  .hiw-card[aria-current="true"]{
    box-shadow:var(--shadow);
    border-color: color-mix(in srgb, var(--accent) 40%, #e5e7eb);
    filter:none;
  }
  .hiw-card[aria-current="false"].is-visible{opacity:.45}
</style>
</head>
<body>
<section class="hiw" aria-label="How it works">
  <h2 class="hiw-title">How it works</h2>

  <div class="hiw-cards">
    <article class="hiw-card" data-step="1" aria-current="false">
      <figure class="hiw-media">
        <img src="https://via.placeholder.com/900x520.png?text=Step+1" alt="Step 1 preview">
      </figure>
      <div class="hiw-body">
        <h3 class="hiw-heading">Test your whole body</h3>
        <p class="hiw-text">Get a comprehensive draw at partner labs or from home.</p>
      </div>
    </article>

    <article class="hiw-card" data-step="2" aria-current="false">
      <figure class="hiw-media">
        <img src="https://via.placeholder.com/900x520.png?text=Step+2" alt="Step 2 preview">
      </figure>
      <div class="hiw-body">
        <h3 class="hiw-heading">An actionable plan</h3>
        <p class="hiw-text">Clear results with tailored diet, lifestyle, and supplement guidance.</p>
      </div>
    </article>

    <article class="hiw-card" data-step="3" aria-current="false">
      <figure class="hiw-media">
        <img src="https://via.placeholder.com/900x520.png?text=Step+3" alt="Step 3 preview">
      </figure>
      <div class="hiw-body">
        <h3 class="hiw-heading">A connected ecosystem</h3>
        <p class="hiw-text">Book diagnostics and manage products and follow-ups in your dashboard.</p>
      </div>
    </article>
  </div>
</section>

<script>
(function(){
  const cards = Array.from(document.querySelectorAll('.hiw-card'));
  if (!cards.length) return;

  const reveal = new IntersectionObserver((entries)=>{
    entries.forEach(e=>{ if(e.isIntersecting) e.target.classList.add('is-visible'); });
  }, { threshold: 0.25 });
  cards.forEach(c=>reveal.observe(c));

  const setActive = () => {
    let best=null, bestDist=Infinity, mid=window.innerHeight/2;
    cards.forEach(c=>{
      const r=c.getBoundingClientRect(), dist=Math.abs((r.top+r.height/2)-mid);
      if(dist<bestDist){ bestDist=dist; best=c; }
    });
    cards.forEach(c=>c.setAttribute('aria-current', String(c===best)));
  };
  setActive();
  addEventListener('scroll', setActive, {passive:true});
  addEventListener('resize', setActive);

  // tell parent our height so it can resize the iframe
  const sendH=()=>parent.postMessage({type:'hiw-height',height:document.documentElement.scrollHeight},'*');
  addEventListener('load', sendH);
  addEventListener('resize', sendH);
  setTimeout(sendH, 100); // after fonts/images
})();
</script>
</body>
</html>
